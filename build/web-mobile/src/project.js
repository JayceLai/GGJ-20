System.register("chunks:///scripts/BackUps/consumer.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,i){var o,n,e,s,a,r,h,l,c,u,p,d,m,y,C,v,w,g,f,x,D,L;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){o=t.inherits,n=t.classCallCheck,e=t.possibleConstructorReturn,s=t.getPrototypeOf,a=t.createClass},function(t){r=t.cclegacy,h=t._decorator,l=t.Vec3,c=t.Quat,u=t.random,p=t.SkeletalAnimationComponent,d=t.SkinningModelComponent,m=t.randomRangeInt,y=t.randomRange,C=t.Component}],execute:function(){r._RF.push({},"ad5a3CwjllK7IsMGpX7Pw4B","consumer",void 0),g=h.ccclass,h.property,f=new l,x=new l,D=new c,L=[8,7],t("Consumer",(v=g("Consumer"),v(w=function(t){function i(){var t,o;n(this,i);for(var a=arguments.length,r=new Array(a),h=0;h<a;h++)r[h]=arguments[h];return(o=e(this,(t=s(i)).call.apply(t,[this].concat(r)))).animComp=null,o.model=null,o.chemistry=u(),o.velocity=new l,o.targetRotation=new c,o.rotationLerpCountDown=1,o.nextTurn=-1,o.idle=!1,o.radius=0,o}return o(i,t),a(i,[{key:"start",value:function(){this.animComp=this.node.getComponent(p),this.model=this.node.getComponentInChildren(d);var t=[1/L[0],1/L[1]];t.push(m(0,L[0])*t[0]),t.push(m(0,L[1])*t[1]),this.model.setInstancedAttribute("a_tiling_offset",t),this.radius=.5*this.node.scene.getChildByName("Ground").scale.x,this.animComp.play(this.animComp.clips[m(0,this.animComp.clips.length)].name)}},{key:"update",value:function(t){this.nextTurn-=t,this.nextTurn<0&&(this.rotationLerpCountDown=2.1,this.idle=u()>this.chemistry,this.idle?this.velocity.set(0,0,0):this.velocity.set(u()-.5,0,u()-.5).normalize(),this.nextTurn=y(0,3));var i=this.node.position;l.add(f,i,l.multiplyScalar(f,this.velocity,5*t*(3*this.chemistry+1))),f.x<-this.radius?(this.velocity.x=Math.abs(this.velocity.x),this.rotationLerpCountDown=2.1):f.x>this.radius&&(this.velocity.x=-Math.abs(this.velocity.x),this.rotationLerpCountDown=2.1),f.y<-this.radius?(this.velocity.y=Math.abs(this.velocity.y),this.rotationLerpCountDown=2.1):f.y>this.radius&&(this.velocity.y=-Math.abs(this.velocity.y),this.rotationLerpCountDown=2.1),f.z<-this.radius?(this.velocity.z=Math.abs(this.velocity.z),this.rotationLerpCountDown=2.1):f.z>this.radius&&(this.velocity.z=-Math.abs(this.velocity.z),this.rotationLerpCountDown=2.1),this.node.setPosition(f),this.rotationLerpCountDown>2&&(c.fromViewUp(this.targetRotation,l.normalize(x,this.velocity)),this.rotationLerpCountDown=2),this.rotationLerpCountDown>0&&(this.node.setRotation(c.slerp(D,this.node.rotation,this.targetRotation,.1)),this.rotationLerpCountDown-=t)}}]),i}(C))||w)),r._RF.pop()}}}));

System.register("chunks:///scripts/BackUps/crowd.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(i,t){var e,n,s,o,a,r,c,l,h,u,d,p,v,f,m,y,g,w,b,A,_,z,x,F,R,k,C,S,B,D;return i({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(i){e=i.applyDecoratedDescriptor,n=i.inherits,s=i.classCallCheck,o=i.possibleConstructorReturn,a=i.getPrototypeOf,r=i.initializerDefineProperty,c=i.assertThisInitialized,l=i.createClass},function(i){h=i.cclegacy,u=i._decorator,d=i.Vec3,p=i.Quat,v=i.Prefab,f=i.instantiate,m=i.randomRange,y=i.Component}],execute:function(){h._RF.push({},"ce6ecXDHJhBS4mB0UwZS22/","crowd",void 0),x=u.ccclass,F=u.property,R=new d,new d,k=new d,new p,C=function(i,t){var e=d.len(i);e>t&&d.multiplyScalar(i,i,t/e)},S=function(i,t,e,n,s){d.multiplyScalar(R,e,s/d.len(e)),C(d.subtract(R,R,t),n),d.add(i,i,R)},B=function i(){s(this,i),this.acceleration=new d,this.velocity=new d(m(-1,1),0,m(-1,1)).normalize(),this.position=new d(m(-1,1),0,m(-1,1)).normalize(),this.rotation=new p,this.idle=!1},D=function(){function i(){s(this,i),this.flockmateRadius=30,this.separationDistance=10,this.maxVelocity=.2,this.alignmentForce=.03,this.cohesionForce=.03,this.separationForce=.03,this.guideForce=.09,this.boids=[],this.boundingRadius=100,this.alignment=new d,this.cohesion=new d,this.separation=new d,this.guide=new d,this.alignmentActive=!1,this.cohesionActive=!1,this.separationActive=!1,this.guideActive=!1}return l(i,[{key:"addBoid",value:function(){var i=new B;d.multiplyScalar(i.position,i.position,m(1,this.boundingRadius)),this.boids.push(i)}},{key:"update",value:function(){for(var i=this.boids,t=this.flockmateRadius,e=this.separationDistance,n=this.maxVelocity,s=this.boundingRadius,o=this.alignmentForce,a=this.cohesionForce,r=this.separationForce,c=this.guideForce,l=this.alignment,h=this.cohesion,u=this.separation,v=this.guide,f=0,m=0;m<i.length;m++){var y=i[m];if(!y.idle){d.set(l,0,0,0),d.set(h,0,0,0),d.set(u,0,0,0),d.set(y.acceleration,0,0,0);for(var g=0;g<i.length;g++){var w=i[g];y!==w&&(d.subtract(R,w.position,y.position),(f=Math.max(.1,d.len(R)))<e&&(d.multiplyScalar(k,R,-1/f),d.add(u,u,k),this.separationActive=!0),f<t&&(d.add(h,h,R),this.cohesionActive=!0,d.add(l,l,w.idle?d.ZERO:w.velocity),this.alignmentActive=!0))}this.alignmentActive&&(S(y.acceleration,y.velocity,l,o,n),this.alignmentActive=!1),this.cohesionActive&&(S(y.acceleration,y.velocity,h,a,n),this.cohesionActive=!1),this.separationActive&&(S(y.acceleration,y.velocity,u,r,n),this.separationActive=!1),this.guideActive&&S(y.acceleration,y.velocity,v,c,n)}}for(var b=0;b<i.length;b++){var A=i[b],_=A.velocity,z=A.acceleration,x=A.position,F=A.rotation;A.idle||(C(d.add(_,_,z),n),d.add(x,x,_),x.x<-s?x.x+=2*s:x.x>s&&(x.x-=2*s),x.y<-s?x.y+=2*s:x.y>s&&(x.y-=2*s),x.z<-s?x.z+=2*s:x.z>s&&(x.z-=2*s),p.fromViewUp(F,d.normalize(R,_)))}}}]),i}(),i("Crowd",(g=x("Crowd"),w=F(v),g((_=e((A=function(i){function t(){var i,e;s(this,t);for(var n=arguments.length,l=new Array(n),h=0;h<n;h++)l[h]=arguments[h];return e=o(this,(i=a(t)).call.apply(i,[this].concat(l))),r(e,"count",_,c(e)),r(e,"prefab",z,c(e)),e.flock=new D,e.animComps=[],e.nextIdleSwitches=[],e.radius=0,e}return n(t,i),l(t,[{key:"start",value:function(){this.radius=.5*this.node.scene.getChildByName("Ground").scale.x;for(var i=0;i<this.count;i++){var t=f(this.prefab);t.setPosition(m(-this.radius,this.radius),0,m(-this.radius,this.radius)),t.parent=this.node}}}]),t}(y)).prototype,"count",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),z=e(A.prototype,"prefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=A))||b)),h._RF.pop()}}}));

System.register("chunks:///scripts/Unit.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(c,t){var n,e;return{setters:[function(c){n=c.classCallCheck},function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"cce73P0iJlB2bG821DIo9Cv","Unit",void 0),c("Unit",(function c(){n(this,c)})),e._RF.pop()}}}));

System.register("chunks:///scripts/AdvertisementManager.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var n,s,c;return{setters:[function(e){n=e.createClass,s=e.classCallCheck},function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"7be59zlN61PGoDHNcWNw5bg","AdvertisementManager",void 0),e("AdvertisementMananger",function(){function e(){s(this,e),this._activeAdvertisements=[]}return n(e,[{key:"update",value:function(e){}}]),e}()),c._RF.pop()}}}));

System.register("chunks:///scripts/Advertisement.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var s,i;return{setters:[function(e){s=e.classCallCheck},function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"e4489B+I19F2bTV5nP1dpk+","Advertisement",void 0),e("Advertisement",(function e(){s(this,e),this.price=10,this.range=10,this.attraction=10})),i._RF.pop()}}}));

System.register("chunks:///scripts/Customer.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./Unit.js"],(function(t,n){var r,c,e,i,a,o,s,u,l,f;return{setters:[function(t){r=t.inherits,c=t.createClass,e=t.classCallCheck,i=t.possibleConstructorReturn,a=t.getPrototypeOf},function(t){o=t.cclegacy,s=t.randomRangeInt,u=t.clamp},function(t){l=t.Unit}],execute:function(){o._RF.push({},"22944MG5Z5ODKm8KBuccvxJ","Customer",void 0),t("Customer",f=function(t){function n(){var t,r;e(this,n);for(var c=arguments.length,o=new Array(c),u=0;u<c;u++)o[u]=arguments[u];return(r=i(this,(t=a(n)).call.apply(t,[this].concat(o)))).baseAttraction=s(0,50),r._attraction=50,r}return r(n,t),c(n,[{key:"attraction",get:function(){return this._attraction},set:function(t){this._attraction=u(t,this.baseAttraction,n.maxAttraction)}}]),n}(l)),f.minAttraction=0,f.maxAttraction=100,o._RF.pop()}}}));

System.register("chunks:///first-person-camera.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var i,o,n,r,a,s,h,c,u,l,p,d,f,m,_,v,g,y,T,O,P,E,b,H,w,S,C,M,x,z,R,U,k,A,L,j,D,I,N,Q;return t({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_temp:void 0}),{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inherits,n=t.classCallCheck,r=t.possibleConstructorReturn,a=t.getPrototypeOf,s=t.initializerDefineProperty,h=t.assertThisInitialized,c=t.createClass},function(t){u=t.cclegacy,l=t._decorator,p=t.math,d=t.Node,f=t.toRadian,m=t.systemEvent,_=t.SystemEvent,v=t.CameraComponent,g=t.renderer,y=t.game,T=t.Component}],execute:function(){u._RF.push({},"880b4w+I/RN1adeszn5EeG2","first-person-camera",void 0),U=l.ccclass,k=l.property,A=p.Vec2,L=p.Vec3,p.Quat,j=new A,D=new A,I=new L,N=new L,Q=new L,t("FirstPersonCamera",(O=k({type:d}),P=k({slide:!0,range:[.05,.5,.01]}),U((H=i((b=function(t){function e(){var t,i;n(this,e);for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return i=r(this,(t=a(e)).call.apply(t,[this].concat(c))),s(i,"ground",H,h(i)),s(i,"moveSpeed",w,h(i)),s(i,"scrollSpeed",S,h(i)),s(i,"maxOrtheHeight",C,h(i)),s(i,"minOrtheHeight",M,h(i)),s(i,"panMaxPosition",x,h(i)),s(i,"panMinPosition",z,h(i)),s(i,"damp",R,h(i)),i._position=new L,i._totalPanOffset=new L,i._currentPanOffset=new L,i._startPosition=null,i._isZooming=!1,i}return o(e,t),c(e,[{key:"onLoad",value:function(){this.node.eulerAngles=new L(-30,45,0);var t=.5*this.ground.scale.x;this._startPosition=this.node.position=new L(t,Math.SQRT2*t*Math.tan(f(30)),t),m.on(_.EventType.MOUSE_WHEEL,this.onMouseWheel,this),m.on(_.EventType.TOUCH_START,this.onTouchStart,this),m.on(_.EventType.TOUCH_MOVE,this.onTouchMove,this),m.on(_.EventType.TOUCH_END,this.onTouchEnd,this),L.copy(this._position,this.node.position),this._camera=this.node.getComponent(v)}},{key:"onDestroy",value:function(){m.off(_.EventType.MOUSE_WHEEL,this.onMouseWheel,this),m.off(_.EventType.TOUCH_START,this.onTouchStart,this),m.off(_.EventType.TOUCH_MOVE,this.onTouchMove,this),m.off(_.EventType.TOUCH_END,this.onTouchEnd,this)}},{key:"update",value:function(t){var e=this.maxOrtheHeight/this._camera.orthoHeight,i=new L(e,e/Math.SQRT2,1);L.multiply(N,this.panMinPosition,i),L.multiply(Q,this.panMaxPosition,i),L.add(I,this._totalPanOffset,this._currentPanOffset),L.transformQuat(I,I.clampf(N,Q),this.node.rotation),L.add(this._position,this._startPosition,I),L.lerp(I,this.node.position,this._position,t/this.damp),this.node.setPosition(I)}},{key:"onMouseWheel",value:function(t){var e=-t.getScrollY()*this.scrollSpeed*.1;this._camera.projection===g.CameraProjection.PERSPECTIVE?(L.transformQuat(I,L.UNIT_Z,this.node.rotation),L.scaleAndAdd(this._position,this.node.position,I,e)):(this._camera.orthoHeight+=.1*e,this._camera.orthoHeight=p.clamp(this._camera.orthoHeight,this.minOrtheHeight,this.maxOrtheHeight))}},{key:"onTouchStart",value:function(t){t.getLocation(j),this._currentPanOffset.set(0,0,0),this._isZooming=j.x<.2*y.canvas.width}},{key:"onTouchMove",value:function(t){if(t.getLocation(D),this._isZooming){t.getPreviousLocation(j),A.subtract(D,D,j);var e=-D.y*this.scrollSpeed*.5;this._camera.projection===g.CameraProjection.PERSPECTIVE?(L.transformQuat(I,L.UNIT_Z,this.node.rotation),L.scaleAndAdd(this._position,this.node.position,I,e)):(this._camera.orthoHeight+=.1*e,this._camera.orthoHeight=p.clamp(this._camera.orthoHeight,this.minOrtheHeight,this.maxOrtheHeight))}else{t.getStartLocation(j),t.getLocation(D),A.subtract(D,D,j);var i=this._camera.orthoHeight/this.maxOrtheHeight;this._currentPanOffset.x=-D.x*this.moveSpeed*i,this._currentPanOffset.y=-D.y*this.moveSpeed*i}}},{key:"onTouchEnd",value:function(t){this._totalPanOffset.add(this._currentPanOffset),this._currentPanOffset.set(0,0,0)}}]),e}(T)).prototype,"ground",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(b.prototype,"moveSpeed",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),S=i(b.prototype,"scrollSpeed",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),C=i(b.prototype,"maxOrtheHeight",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 94}}),M=i(b.prototype,"minOrtheHeight",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),x=i(b.prototype,"panMaxPosition",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new L(40,40,0)}}),z=i(b.prototype,"panMinPosition",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new L(-40,-40,0)}}),R=i(b.prototype,"damp",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),E=b))||E)),u._RF.pop()}}}));

System.register("chunks:///scripts/AdvParticle.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var r,i,c,n,o,a,s,l,p,u,v,f,d,y,h,_,P,C,g;return t({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(t){r=t.applyDecoratedDescriptor,i=t.inherits,c=t.classCallCheck,n=t.possibleConstructorReturn,o=t.getPrototypeOf,a=t.initializerDefineProperty,s=t.assertThisInitialized,l=t.createClass},function(t){p=t.cclegacy,u=t._decorator,v=t.ParticleSystemComponent,f=t.Component}],execute:function(){p._RF.push({},"80528rXOztM8a29CMv51lE6","AdvParticle",void 0),C=u.ccclass,g=u.property,t("AdvParticle",(d=C("AdvParticle"),y=g({type:[v]}),d((P=r((_=function(t){function e(){var t,r;c(this,e);for(var i=arguments.length,l=new Array(i),p=0;p<i;p++)l[p]=arguments[p];return r=n(this,(t=o(e)).call.apply(t,[this].concat(l))),a(r,"particles",P,s(r)),r}return i(e,t),l(e,[{key:"start",value:function(){}},{key:"stop",value:function(){this.particles.forEach((function(t){return t.stop()}))}},{key:"play",value:function(){this.particles.forEach((function(t){return t.play()}))}}]),e}(f)).prototype,"particles",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=_))||h)),p._RF.pop()}}}));

System.register("chunks:///scripts/AdvertisementController.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./AdvParticle.js"],(function(e,t){var r,i,n,o,a,l,s,c,u,p,d,v,f,h,P,_,y,m,b,C,w,g,A;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inherits,n=e.classCallCheck,o=e.possibleConstructorReturn,a=e.getPrototypeOf,l=e.initializerDefineProperty,s=e.assertThisInitialized,c=e.createClass},function(e){u=e.cclegacy,p=e._decorator,d=e.Prefab,v=e.Pool,f=e.instantiate,h=e.Vec3,P=e.Component},function(e){_=e.AdvParticle}],execute:function(){u._RF.push({},"eb1e3K9ZpxPrYmqwGvtAc2Q","AdvertisementController",void 0),g=p.ccclass,A=p.property,e("AdvertisementController",(y=g("AdvertisementController"),m=A({type:d}),y((w=r((C=function(e){function t(){var e,r;n(this,t);for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];return r=o(this,(e=a(t)).call.apply(e,[this].concat(c))),l(r,"advertiseParticlePrfb",w,s(r)),r._adParticle=null,r._showTime=0,r}return i(t,e),c(t,[{key:"onLoad",value:function(){var e=this;this._particlePool=new v((function(){var t=f(e.advertiseParticlePrfb);return t.parent=e.node,t.getComponent(_)}),5)}},{key:"start",value:function(){}},{key:"show",value:function(){var e=this,t=this.advertisementData.range/10,r=this._particlePool.alloc();r.node.setScale(new h(t,t,t)),r.stop(),r.play(),this._showTime=1,this.node.active=!0,this.scheduleOnce((function(){e._particlePool.free(r)}),this._showTime)}},{key:"update",value:function(e){}}]),t}(P)).prototype,"advertiseParticlePrfb",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=C))||b)),u._RF.pop()}}}));

System.register("chunks:///scripts/Production.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,c){var i,s;return{setters:[function(t){i=t.classCallCheck},function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"9c7b2I+us1GJIguT1jCCvt2","Production",void 0),t("Production",(function t(c,s,e){i(this,t),this.priceStateNum=5,this.price=c,this.count=s,this.cost=e,this.priceLow=c,this.pricePreGrad=(c-e)/this.priceStateNum})),s._RF.pop()}}}));

System.register("chunks:///scripts/Player.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./Production.js"],(function(c,n){var e,t,i;return{setters:[function(c){e=c.classCallCheck},function(c){t=c.cclegacy},function(c){i=c.Production}],execute:function(){t._RF.push({},"c5fc281unpE6Zv91gX5ZI2F","Player",void 0),c("Player",(function c(){e(this,c),this.money=2e3,this.production=new i(200,0,100)})),t._RF.pop()}}}));

System.register("chunks:///scripts/PlayerController.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./Advertisement.js","./AdvertisementController.js","./Player.js"],(function(e,t){var i,r,n,o,a,s,c,d,u,l,p,h,y,v,m,_,f,g,P,T,b,C,D,A,S,I,k,w,E,H,M,U,j,N,z,G,R,B,O,W,x,F,J,L;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inherits,n=e.classCallCheck,o=e.possibleConstructorReturn,a=e.getPrototypeOf,s=e.initializerDefineProperty,c=e.assertThisInitialized,d=e.createClass},function(e){u=e.cclegacy,l=e._decorator,p=e.geometry,h=e.Vec3,y=e.Prefab,v=e.LabelComponent,m=e.CameraComponent,_=e.ModelComponent,f=e.instantiate,g=e.director,P=e.systemEvent,T=e.SystemEvent,b=e.loader,C=e.JsonAsset,D=e.PhysicsSystem,A=e.Component},function(e){S=e.Advertisement},function(e){I=e.AdvertisementController},function(e){k=e.Player}],execute:function(){u._RF.push({},"c81a3oMr4BAqptDZXHT+JXH","PlayerController",void 0),x=l.ccclass,F=l.property,J=p.ray,L=new J,new h,e("PlayerController",(w=x("PlayerController"),E=F({type:y}),H=F({type:y}),M=F({type:v}),U=F({type:v}),j=F({type:v}),w((G=i((z=function(e){function t(){var e,i;n(this,t);for(var r=arguments.length,d=new Array(r),u=0;u<r;u++)d[u]=arguments[u];return i=o(this,(e=a(t)).call.apply(e,[this].concat(d))),s(i,"rangeIndicatorPrfb",G,c(i)),s(i,"advertisementPrfb",R,c(i)),s(i,"customMoneyTips",B,c(i)),s(i,"customProductionPriceTips",O,c(i)),s(i,"customProductionCountTips",W,c(i)),i._advertisements=[],i}return r(t,e),d(t,[{key:"start",value:function(){this.playerData=new k,this.initAd(),this._cameraNode=this.node.scene.getChildByName("Camera"),this._cameraComp=this._cameraNode.getComponent(m),this._groundNode=this.node.scene.getChildByName("Ground"),this._groundModelComp=this._groundNode.getComponent(_),this._rangeIndicator=f(this.rangeIndicatorPrfb),this._rangeIndicator.parent=g.getScene(),this._rangeIndicator.active=!1,P.on(T.EventType.TOUCH_START,this.onTouchStart.bind(this)),P.on(T.EventType.TOUCH_MOVE,this.onTouchMove.bind(this)),P.on(T.EventType.TOUCH_END,this.onTouchEnd.bind(this)),this.updateUITips()}},{key:"initAd",value:function(){var e=this;b.loadRes("configs/advertisements.json",C,(function(t,i){Array.isArray(i.json)&&(i.json.forEach((function(t){var i=new S;i.price=t.price,i.range=t.range,i.range=t.range;var r=f(e.advertisementPrfb);r.parent=g.getScene(),r.active=!1;var n=r.getComponent(I);n.advertisementData=i,e._advertisements.push(n)})),e._curSelectedAd=e._advertisements[0])}))}},{key:"update",value:function(e){}},{key:"raycastHitGround",value:function(e,t){var i=e.getLocation();this._cameraComp.screenPointToRay(i.x,i.y,L);var r=D.instance.raycastResults;if(D.instance.raycast(L))for(var n=0;n<r.length;n++){var o=r[n];o.collider.node.uuid===this._groundModelComp.node.uuid&&t&&t(o.hitPoint)}}},{key:"onTouchStart",value:function(e){var t=this;this._isTouchStarted=!0,this._rangeIndicator.active=!0;var i=this._curSelectedAd.advertisementData.range;this._rangeIndicator.setScale(new h(2*i,1,2*i)),this.raycastHitGround(e,(function(e){t._rangeIndicator.setWorldPosition(e)}))}},{key:"onTouchMove",value:function(e){var t=this;this._isTouchStarted&&this.raycastHitGround(e,(function(e){t._rangeIndicator.setWorldPosition(e)}))}},{key:"onTouchEnd",value:function(e){var t=this;this._isTouchStarted=!1,this._rangeIndicator.active=!1,this.raycastHitGround(e,(function(e){t._rangeIndicator.setWorldPosition(e),t._curSelectedAd.advertisementData.price<t.playerData.money&&(t.playerData.money-=t._curSelectedAd.advertisementData.price,t.updateUITips(),t._curSelectedAd.node.setWorldPosition(e),t._curSelectedAd.show(),t.onDropAd(e,t._curSelectedAd))}))}},{key:"updateUITips",value:function(){this.customMoneyTips.string=""+this.playerData.money,this.customProductionPriceTips.string=""+this.playerData.production.price,this.customProductionCountTips.string=""+this.playerData.production.count}},{key:"addProduction",value:function(){this.playerData.money>this.playerData.production.cost?(this.playerData.money-=this.playerData.production.cost,this.playerData.production.count++,this.updateUITips()):console.log("111111111")}},{key:"addPrice",value:function(){this.playerData.production.price+=this.playerData.production.pricePreGrad,this.onAddPrice&&this.onAddPrice(),this.updateUITips()}},{key:"subPrice",value:function(){this.playerData.production.price-=this.playerData.production.pricePreGrad,this.onSubPrice&&this.onSubPrice(),this.updateUITips()}},{key:"onAdButtonClicked",value:function(e,t){var i=Number.parseInt(t);this._curSelectedAd=this._advertisements[i]}}]),t}(A)).prototype,"rangeIndicatorPrfb",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(z.prototype,"advertisementPrfb",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(z.prototype,"customMoneyTips",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(z.prototype,"customProductionPriceTips",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(z.prototype,"customProductionCountTips",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=z))||N)),u._RF.pop()}}}));

System.register("chunks:///scripts/GameDefines.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,s){var n,c;return{setters:[function(e){n=e.classCallCheck},function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"d944dKrK9xGIr1z9Nq2WvUX","GameDefines",void 0),e("gameDefines",new function e(){n(this,e),this.fallofSpeed=20}),c._RF.pop()}}}));

System.register("chunks:///scripts/CompanySuit.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,n){var o,i,e,a,r,s,c,p,u,h,l,m,d,C,_,f,g,v;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){o=t.inherits,i=t.classCallCheck,e=t.possibleConstructorReturn,a=t.getPrototypeOf,r=t.createClass},function(t){s=t.cclegacy,c=t._decorator,p=t.Vec3,u=t.Quat,h=t.SkeletalAnimationComponent,l=t.AnimationClip,m=t.AnimationComponent,d=t.Component}],execute:function(){s._RF.push({},"36fc9bA6z9CiIzW6/3ChN0q","CompanySuit",void 0),f=c.ccclass,c.property,g=new p,v=new u,t("CompanySuit",(C=f("CompanySuit"),C(_=function(t){function n(){var t,o;i(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(o=e(this,(t=a(n)).call.apply(t,[this].concat(s))))._interactFinished=!0,o._targetRotation=new u,o._rotationLerpCountDown=1,o}return o(n,t),r(n,[{key:"start",value:function(){var t=this;this.animComp=this.node.getComponent(h),this.animComp.getState("Root|Interact_standing").wrapMode=l.WrapMode.Normal,this.animComp.on(m.EventType.FINISHED,(function(n,o){t._interactFinished||"Root|Interact_standing"!==o.name||(t.animComp.crossFade("Root|Idle"),t._interactFinished=!0)}))}},{key:"handWaving",value:function(t){this._rotationLerpCountDown=2,u.fromViewUp(this._targetRotation,p.normalize(g,t)),this._interactFinished&&(this.animComp.crossFade("Root|Interact_standing"),this._interactFinished=!1)}},{key:"update",value:function(t){this._rotationLerpCountDown>0&&(u.slerp(v,this.node.rotation,this._targetRotation,.1),this.node.setRotation(v),this._rotationLerpCountDown-=t)}}]),n}(d))||_)),s._RF.pop()}}}));

System.register("chunks:///scripts/GameManager.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./PlayerController.js","./GameDefines.js","./CompanySuit.js"],(function(t,e){var r,o,n,i,a,l,s,u,c,p,d,y,f,h,m,C,v,_,g,b,D,P,A,S,k,I,w,G,z,j,B;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_temp:void 0}),{setters:[function(t){r=t.applyDecoratedDescriptor,o=t.inherits,n=t.classCallCheck,i=t.possibleConstructorReturn,a=t.getPrototypeOf,l=t.initializerDefineProperty,s=t.assertThisInitialized,u=t.createClass},function(t){c=t.cclegacy,p=t._decorator,d=t.Vec3,y=t.Prefab,f=t.instantiate,h=t.randomRange,m=t.Component},function(t){C=t.PlayerController},function(t){v=t.gameDefines},function(t){_=t.CompanySuit}],execute:function(){c._RF.push({},"3c34cCllvlGCIKOWNIuqna3","GameManager",void 0),z=p.ccclass,j=p.property,B=new d,t("GameManager",(g=z("GameManager"),b=j({type:C}),D=j({type:y}),P=j({type:y}),g((k=r((S=function(t){function e(){var t,r;n(this,e);for(var o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];return r=i(this,(t=a(e)).call.apply(t,[this].concat(u))),l(r,"playerCtrl",k,s(r)),l(r,"customerPrfb",I,s(r)),l(r,"companySuit",w,s(r)),l(r,"customerCount",G,s(r)),r._customers=[],r._falloffInterval=1,r._curFalloffTime=0,r._companySuitInst=null,r}return o(e,t),u(e,[{key:"onLoad",value:function(){e._instance=this}},{key:"start",value:function(){this._groundNode=this.node.scene.getChildByName("Ground"),this.playerCtrl.onDropAd=this.onDropAd.bind(this),this.playerCtrl.onAddPrice=this.onAddPrice.bind(this),this.playerCtrl.onSubPrice=this.onSubPrice.bind(this),this.initCustomers();var t=f(this.companySuit);t.parent=this.node,this._companySuitInst=t.getComponent(_)}},{key:"initCustomers",value:function(){for(var t=.5*this._groundNode.scale.x,e=0;e<this.customerCount;e++){var r=f(this.customerPrfb);r.setPosition(h(-t,t),0,h(-t,t)),r.parent=this.node;var o=r.getComponent("CustomerController");o.onBuyProduction=this.onCustomBuyProduction.bind(this),this._customers.push(o)}}},{key:"onDropAd",value:function(t,e){this._companySuitInst.handWaving(t);var r=[];this._customers.forEach((function(o){d.subtract(B,t,o.node.getWorldPosition()),B.length()<=e.advertisementData.range&&r.push(o)}));var o=e.advertisementData.attraction;if(r.length>=2){var n=0;for(n=r.length-1;n>=1;n-=2){var i=r[n],a=r[n-1],l=h(-o,o),s=2*o-l;i.addAttraction(l),a.addAttraction(s)}0===n&&r[0].addAttraction(o)}else 1===r.length&&r[0].addAttraction(o)}},{key:"falloffAllCustomers",value:function(t){this._customers.forEach((function(e){e.addAttraction(t)}))}},{key:"update",value:function(t){this.falloffAllCustomers(-v.fallofSpeed*t)}},{key:"onCustomBuyProduction",value:function(t){var e=this.playerCtrl.playerData.production.count-1;e>=0&&(this.playerCtrl.playerData.production.count=e,this.playerCtrl.playerData.money+=this.playerCtrl.playerData.production.price,this.playerCtrl.updateUITips())}},{key:"onAddPrice",value:function(){this.falloffAllCustomers(-20)}},{key:"onSubPrice",value:function(){var t=0;this.playerCtrl.playerData.production.price>this.playerCtrl.playerData.production.cost/2&&this.playerCtrl.playerData.production.price<this.playerCtrl.playerData.production.priceLow&&(t=40/this.playerCtrl.playerData.production.priceStateNum,this.playerCtrl.playerData.production.priceLow=this.playerCtrl.playerData.production.price),this.falloffAllCustomers(t)}},{key:"queryProductionCount",value:function(){return this.playerCtrl.playerData.production.count}}],[{key:"Instance",get:function(){return e._instance}}]),e}(m)).prototype,"playerCtrl",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=r(S.prototype,"customerPrfb",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=r(S.prototype,"companySuit",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=r(S.prototype,"customerCount",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),A=S))||A)),c._RF.pop()}}}));

System.register("chunks:///scripts/CustomerController.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./Customer.js","./GameManager.js"],(function(t,o){var i,e,s,a,n,r,h,c,l,u,d,m,p,y,D,C,v,I,R,L,f,g,w,E,A,M,O;return t({_dec:void 0,_class:void 0,_temp:void 0,CustomerStates:void 0}),{setters:[function(t){i=t.inherits,e=t.classCallCheck,s=t.possibleConstructorReturn,a=t.getPrototypeOf,n=t.createClass},function(t){r=t.cclegacy,h=t._decorator,c=t.Vec3,l=t.Quat,u=t.randomRange,d=t.SkeletalAnimationComponent,m=t.SkinningModelComponent,p=t.ModelComponent,y=t.randomRangeInt,D=t.random,C=t.Component},function(t){v=t.Customer},function(t){I=t.GameManager}],execute:function(){r._RF.push({},"b01d7JfclREB68N4VGM53e5","CustomerController",void 0),f=h.ccclass,h.property,g=new c,w=new c,E=new l,t("textureCounts",A=[8,7]),M=[1,1,1,1],function(t){t[t.IDLE=0]="IDLE",t[t.ROAMING=1]="ROAMING",t[t.HOOKED=2]="HOOKED",t[t.DEAL=3]="DEAL",t[t.RIPPED_OFF=4]="RIPPED_OFF"}(O||(O={})),t("CustomerController",(R=f("CustomerController"),R(L=function(t){function o(){var t,i;e(this,o);for(var n=arguments.length,r=new Array(n),h=0;h<n;h++)r[h]=arguments[h];return(i=s(this,(t=a(o)).call.apply(t,[this].concat(r)))).animComp=null,i.moodBillBoard=null,i.model=null,i.state=O.IDLE,i.velocity=new c,i.targetRotation=new l,i.targetDealDistance=u(5,15),i.rotationLerpCountDown=1,i.nextTurn=-1,i.radius=0,i}return i(o,t),n(o,[{key:"start",value:function(){this.customerData=new v,this.animComp=this.node.getComponent(d),this.model=this.node.getComponentInChildren(m),this.moodBillBoard=this.node.getChildByName("mood").getComponent(p),this.moodBillBoard.setInstancedAttribute("a_tiling_offset",[1,1,0,0]),this.moodBillBoard.enabled=!1;var t=[1/A[0],1/A[1]];t.push(y(0,A[0])*t[0]),t.push(y(0,A[1])*t[1]),this.model.setInstancedAttribute("a_tiling_offset",t),this.radius=.5*this.node.scene.getChildByName("Ground").scale.x}},{key:"update",value:function(t){if(this.nextTurn-=t,this.nextTurn<0&&(this.state===O.IDLE||this.state===O.ROAMING)){var o=D()>.01*this.customerData.attraction;o&&this.state===O.ROAMING?(this.velocity.set(0,0,0),this.animComp.play("Root|Idle"),this.state=O.IDLE):o||this.state!==O.IDLE||(this.velocity.set(D()-.5,0,D()-.5).normalize(),this.animComp.play(this.customerData.attraction>20?"Root|Run":"Root|Walk"),this.state=O.ROAMING),this.rotationLerpCountDown=2.1,this.nextTurn=u(0,3)}var i=this.node.position;switch(this.state){case O.HOOKED:var e=i.length();this.velocity.set(i).multiplyScalar(-1/e),this.rotationLerpCountDown=2.1,e<this.targetDealDistance&&(this.buyProduction()?(this.state=O.DEAL,this.animComp.play("Root|Interact_ground")):(this.state=O.ROAMING,this.velocity.set(i).multiplyScalar(1/e),this.nextTurn=2));case O.ROAMING:c.add(g,i,c.multiplyScalar(g,this.velocity,5*t*(.03*this.customerData.attraction+1))),g.x<-this.radius?(this.velocity.x=Math.abs(this.velocity.x),this.rotationLerpCountDown=2.1):g.x>this.radius&&(this.velocity.x=-Math.abs(this.velocity.x),this.rotationLerpCountDown=2.1),g.y<-this.radius?(this.velocity.y=Math.abs(this.velocity.y),this.rotationLerpCountDown=2.1):g.y>this.radius&&(this.velocity.y=-Math.abs(this.velocity.y),this.rotationLerpCountDown=2.1),g.z<-this.radius?(this.velocity.z=Math.abs(this.velocity.z),this.rotationLerpCountDown=2.1):g.z>this.radius&&(this.velocity.z=-Math.abs(this.velocity.z),this.rotationLerpCountDown=2.1),this.node.setPosition(g),this.rotationLerpCountDown>2&&(l.fromViewUp(this.targetRotation,c.normalize(w,this.velocity)),this.rotationLerpCountDown=2),this.rotationLerpCountDown>0&&(this.node.setRotation(l.slerp(E,this.node.rotation,this.targetRotation,.1)),this.rotationLerpCountDown-=t);case O.IDLE:M[0]=M[1]=M[2]=Math.min(.02*this.customerData.attraction,1),this.model.setInstancedAttribute("a_color_instanced",M);break;case O.DEAL:}}},{key:"addAttraction",value:function(t){var o=this.customerData.attraction+t;switch(this.customerData.attraction=o,this.state){case O.IDLE:case O.ROAMING:o>50&&(this.state=O.HOOKED,this.animComp.play("Root|Run"));break;case O.HOOKED:o<=50&&(this.state=O.IDLE,this.animComp.play("Root|Idle"));break;case O.DEAL:}}},{key:"buyProduction",value:function(){if(I.Instance.queryProductionCount()<=0){var t=this.customerData.baseAttraction;return this.customerData.attraction=this.customerData.baseAttraction=Math.floor(.8*t),!1}return this.onBuyProduction&&this.onBuyProduction(this),!0}}]),o}(C))||L)),r._RF.pop()}}}));

System.register("chunks:///_virtual/prerequisite-imports:main",["../scripts/BackUps/consumer.js","../scripts/BackUps/crowd.js","../scripts/Unit.js","../scripts/AdvertisementManager.js","../scripts/Advertisement.js","../scripts/Customer.js","../first-person-camera.js","../scripts/AdvParticle.js","../scripts/AdvertisementController.js","../scripts/Production.js","../scripts/Player.js","../scripts/PlayerController.js","../scripts/GameDefines.js","../scripts/CompanySuit.js","../scripts/GameManager.js","../scripts/CustomerController.js"],(function(s,t){return{setters:[function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){}],execute:function(){}}}));

(function(r) {
  r('project:///assets/scripts/BackUps/consumer.js', 'chunks:///scripts/BackUps/consumer.js');
  r('project:///assets/scripts/BackUps/crowd.js', 'chunks:///scripts/BackUps/crowd.js');
  r('project:///assets/scripts/Unit.js', 'chunks:///scripts/Unit.js');
  r('project:///assets/scripts/AdvertisementManager.js', 'chunks:///scripts/AdvertisementManager.js');
  r('project:///assets/scripts/Advertisement.js', 'chunks:///scripts/Advertisement.js');
  r('project:///assets/scripts/Customer.js', 'chunks:///scripts/Customer.js');
  r('project:///assets/first-person-camera.js', 'chunks:///first-person-camera.js');
  r('project:///assets/scripts/AdvParticle.js', 'chunks:///scripts/AdvParticle.js');
  r('project:///assets/scripts/AdvertisementController.js', 'chunks:///scripts/AdvertisementController.js');
  r('project:///assets/scripts/Production.js', 'chunks:///scripts/Production.js');
  r('project:///assets/scripts/Player.js', 'chunks:///scripts/Player.js');
  r('project:///assets/scripts/PlayerController.js', 'chunks:///scripts/PlayerController.js');
  r('project:///assets/scripts/GameDefines.js', 'chunks:///scripts/GameDefines.js');
  r('project:///assets/scripts/CompanySuit.js', 'chunks:///scripts/CompanySuit.js');
  r('project:///assets/scripts/GameManager.js', 'chunks:///scripts/GameManager.js');
  r('project:///assets/scripts/CustomerController.js', 'chunks:///scripts/CustomerController.js');
  r('virtual:///prerequisite-imports:main', 'chunks:///_virtual/prerequisite-imports:main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    var _m;
    return {
        setters: [function(m) { _m = m; }],
        execute: function () { _export(_m); }
    };
    });
});