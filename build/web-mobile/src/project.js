System.register("chunks:///scripts/BackUps/consumer.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,i){var o,n,e,s,a,r,h,l,c,u,p,d,m,y,C,v,w,g,f,x,D,L;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){o=t.inherits,n=t.classCallCheck,e=t.possibleConstructorReturn,s=t.getPrototypeOf,a=t.createClass},function(t){r=t.cclegacy,h=t._decorator,l=t.Vec3,c=t.Quat,u=t.random,p=t.SkeletalAnimationComponent,d=t.SkinningModelComponent,m=t.randomRangeInt,y=t.randomRange,C=t.Component}],execute:function(){r._RF.push({},"ad5a3CwjllK7IsMGpX7Pw4B","consumer",void 0),g=h.ccclass,h.property,f=new l,x=new l,D=new c,L=[8,7],t("Consumer",(v=g("Consumer"),v(w=function(t){function i(){var t,o;n(this,i);for(var a=arguments.length,r=new Array(a),h=0;h<a;h++)r[h]=arguments[h];return(o=e(this,(t=s(i)).call.apply(t,[this].concat(r)))).animComp=null,o.model=null,o.chemistry=u(),o.velocity=new l,o.targetRotation=new c,o.rotationLerpCountDown=1,o.nextTurn=-1,o.idle=!1,o.radius=0,o}return o(i,t),a(i,[{key:"start",value:function(){this.animComp=this.node.getComponent(p),this.model=this.node.getComponentInChildren(d);var t=[1/L[0],1/L[1]];t.push(m(0,L[0])*t[0]),t.push(m(0,L[1])*t[1]),this.model.setInstancedAttribute("a_tiling_offset",t),this.radius=.5*this.node.scene.getChildByName("Ground").scale.x,this.animComp.play(this.animComp.clips[m(0,this.animComp.clips.length)].name)}},{key:"update",value:function(t){this.nextTurn-=t,this.nextTurn<0&&(this.rotationLerpCountDown=2.1,this.idle=u()>this.chemistry,this.idle?this.velocity.set(0,0,0):this.velocity.set(u()-.5,0,u()-.5).normalize(),this.nextTurn=y(0,3));var i=this.node.position;l.add(f,i,l.multiplyScalar(f,this.velocity,5*t*(3*this.chemistry+1))),f.x<-this.radius?(this.velocity.x=Math.abs(this.velocity.x),this.rotationLerpCountDown=2.1):f.x>this.radius&&(this.velocity.x=-Math.abs(this.velocity.x),this.rotationLerpCountDown=2.1),f.y<-this.radius?(this.velocity.y=Math.abs(this.velocity.y),this.rotationLerpCountDown=2.1):f.y>this.radius&&(this.velocity.y=-Math.abs(this.velocity.y),this.rotationLerpCountDown=2.1),f.z<-this.radius?(this.velocity.z=Math.abs(this.velocity.z),this.rotationLerpCountDown=2.1):f.z>this.radius&&(this.velocity.z=-Math.abs(this.velocity.z),this.rotationLerpCountDown=2.1),this.node.setPosition(f),this.rotationLerpCountDown>2&&(c.fromViewUp(this.targetRotation,l.normalize(x,this.velocity)),this.rotationLerpCountDown=2),this.rotationLerpCountDown>0&&(this.node.setRotation(c.slerp(D,this.node.rotation,this.targetRotation,.1)),this.rotationLerpCountDown-=t)}}]),i}(C))||w)),r._RF.pop()}}}));

System.register("chunks:///scripts/BackUps/crowd.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(i,t){var e,n,s,o,a,r,c,l,h,u,d,p,v,f,m,y,g,w,b,A,_,z,x,F,R,k,C,S,B,D;return i({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(i){e=i.applyDecoratedDescriptor,n=i.inherits,s=i.classCallCheck,o=i.possibleConstructorReturn,a=i.getPrototypeOf,r=i.initializerDefineProperty,c=i.assertThisInitialized,l=i.createClass},function(i){h=i.cclegacy,u=i._decorator,d=i.Vec3,p=i.Quat,v=i.Prefab,f=i.instantiate,m=i.randomRange,y=i.Component}],execute:function(){h._RF.push({},"ce6ecXDHJhBS4mB0UwZS22/","crowd",void 0),x=u.ccclass,F=u.property,R=new d,new d,k=new d,new p,C=function(i,t){var e=d.len(i);e>t&&d.multiplyScalar(i,i,t/e)},S=function(i,t,e,n,s){d.multiplyScalar(R,e,s/d.len(e)),C(d.subtract(R,R,t),n),d.add(i,i,R)},B=function i(){s(this,i),this.acceleration=new d,this.velocity=new d(m(-1,1),0,m(-1,1)).normalize(),this.position=new d(m(-1,1),0,m(-1,1)).normalize(),this.rotation=new p,this.idle=!1},D=function(){function i(){s(this,i),this.flockmateRadius=30,this.separationDistance=10,this.maxVelocity=.2,this.alignmentForce=.03,this.cohesionForce=.03,this.separationForce=.03,this.guideForce=.09,this.boids=[],this.boundingRadius=100,this.alignment=new d,this.cohesion=new d,this.separation=new d,this.guide=new d,this.alignmentActive=!1,this.cohesionActive=!1,this.separationActive=!1,this.guideActive=!1}return l(i,[{key:"addBoid",value:function(){var i=new B;d.multiplyScalar(i.position,i.position,m(1,this.boundingRadius)),this.boids.push(i)}},{key:"update",value:function(){for(var i=this.boids,t=this.flockmateRadius,e=this.separationDistance,n=this.maxVelocity,s=this.boundingRadius,o=this.alignmentForce,a=this.cohesionForce,r=this.separationForce,c=this.guideForce,l=this.alignment,h=this.cohesion,u=this.separation,v=this.guide,f=0,m=0;m<i.length;m++){var y=i[m];if(!y.idle){d.set(l,0,0,0),d.set(h,0,0,0),d.set(u,0,0,0),d.set(y.acceleration,0,0,0);for(var g=0;g<i.length;g++){var w=i[g];y!==w&&(d.subtract(R,w.position,y.position),(f=Math.max(.1,d.len(R)))<e&&(d.multiplyScalar(k,R,-1/f),d.add(u,u,k),this.separationActive=!0),f<t&&(d.add(h,h,R),this.cohesionActive=!0,d.add(l,l,w.idle?d.ZERO:w.velocity),this.alignmentActive=!0))}this.alignmentActive&&(S(y.acceleration,y.velocity,l,o,n),this.alignmentActive=!1),this.cohesionActive&&(S(y.acceleration,y.velocity,h,a,n),this.cohesionActive=!1),this.separationActive&&(S(y.acceleration,y.velocity,u,r,n),this.separationActive=!1),this.guideActive&&S(y.acceleration,y.velocity,v,c,n)}}for(var b=0;b<i.length;b++){var A=i[b],_=A.velocity,z=A.acceleration,x=A.position,F=A.rotation;A.idle||(C(d.add(_,_,z),n),d.add(x,x,_),x.x<-s?x.x+=2*s:x.x>s&&(x.x-=2*s),x.y<-s?x.y+=2*s:x.y>s&&(x.y-=2*s),x.z<-s?x.z+=2*s:x.z>s&&(x.z-=2*s),p.fromViewUp(F,d.normalize(R,_)))}}}]),i}(),i("Crowd",(g=x("Crowd"),w=F(v),g((_=e((A=function(i){function t(){var i,e;s(this,t);for(var n=arguments.length,l=new Array(n),h=0;h<n;h++)l[h]=arguments[h];return e=o(this,(i=a(t)).call.apply(i,[this].concat(l))),r(e,"count",_,c(e)),r(e,"prefab",z,c(e)),e.flock=new D,e.animComps=[],e.nextIdleSwitches=[],e.radius=0,e}return n(t,i),l(t,[{key:"start",value:function(){this.radius=.5*this.node.scene.getChildByName("Ground").scale.x;for(var i=0;i<this.count;i++){var t=f(this.prefab);t.setPosition(m(-this.radius,this.radius),0,m(-this.radius,this.radius)),t.parent=this.node}}}]),t}(y)).prototype,"count",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),z=e(A.prototype,"prefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=A))||b)),h._RF.pop()}}}));

System.register("chunks:///scripts/Unit.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(c,t){var n,e;return{setters:[function(c){n=c.classCallCheck},function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"cce73P0iJlB2bG821DIo9Cv","Unit",void 0),c("Unit",(function c(){n(this,c)})),e._RF.pop()}}}));

System.register("chunks:///scripts/AdvertisementController.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var r,n,s,o,c,i,l,u,a,p,v;return e({_dec:void 0,_class:void 0}),{setters:[function(e){r=e.inherits,n=e.createClass,s=e.classCallCheck,o=e.possibleConstructorReturn,c=e.getPrototypeOf},function(e){i=e.cclegacy,l=e._decorator,u=e.Component}],execute:function(){i._RF.push({},"eb1e3K9ZpxPrYmqwGvtAc2Q","AdvertisementController",void 0),v=l.ccclass,l.property,e("AdvertisementController",(a=v("AdvertisementController"),a(p=function(e){function t(){return s(this,t),o(this,c(t).apply(this,arguments))}return r(t,e),n(t,[{key:"start",value:function(){}}]),t}(u))||p)),i._RF.pop()}}}));

System.register("chunks:///scripts/AdvertisementManager.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var n,s,c;return{setters:[function(e){n=e.createClass,s=e.classCallCheck},function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"7be59zlN61PGoDHNcWNw5bg","AdvertisementManager",void 0),e("AdvertisementMananger",function(){function e(){s(this,e),this._activeAdvertisements=[]}return n(e,[{key:"update",value:function(e){}}]),e}()),c._RF.pop()}}}));

System.register("chunks:///scripts/Production.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(c,t){var u,i;return{setters:[function(c){u=c.classCallCheck},function(c){i=c.cclegacy}],execute:function(){i._RF.push({},"9c7b2I+us1GJIguT1jCCvt2","Production",void 0),c("Production",(function c(t,i){u(this,c),this.price=t,this.count=i})),i._RF.pop()}}}));

System.register("chunks:///scripts/Player.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./Production.js"],(function(c,n){var e,t,i;return{setters:[function(c){e=c.classCallCheck},function(c){t=c.cclegacy},function(c){i=c.Production}],execute:function(){t._RF.push({},"c5fc281unpE6Zv91gX5ZI2F","Player",void 0),c("Player",(function c(){e(this,c),this.money=2e3,this.production=new i(10,10)})),t._RF.pop()}}}));

System.register("chunks:///scripts/Advertisement.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var s,i;return{setters:[function(e){s=e.classCallCheck},function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"e4489B+I19F2bTV5nP1dpk+","Advertisement",void 0),e("Advertisement",(function e(){s(this,e),this.price=10,this.range=10,this.attraction=10})),i._RF.pop()}}}));

System.register("chunks:///scripts/GameDefines.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,s){var n,c;return{setters:[function(e){n=e.classCallCheck},function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"d944dKrK9xGIr1z9Nq2WvUX","GameDefines",void 0),e("gameDefines",new function e(){n(this,e),this.fallofSpeed=30}),c._RF.pop()}}}));

System.register("chunks:///scripts/Customer.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./Unit.js"],(function(t,n){var r,c,e,i,a,o,s,u,l,f;return{setters:[function(t){r=t.inherits,c=t.createClass,e=t.classCallCheck,i=t.possibleConstructorReturn,a=t.getPrototypeOf},function(t){o=t.cclegacy,s=t.randomRangeInt,u=t.clamp},function(t){l=t.Unit}],execute:function(){o._RF.push({},"22944MG5Z5ODKm8KBuccvxJ","Customer",void 0),t("Customer",f=function(t){function n(){var t,r;e(this,n);for(var c=arguments.length,o=new Array(c),u=0;u<c;u++)o[u]=arguments[u];return(r=i(this,(t=a(n)).call.apply(t,[this].concat(o)))).baseAttraction=s(0,50),r._attraction=50,r}return r(n,t),c(n,[{key:"attraction",get:function(){return this._attraction},set:function(t){this._attraction=u(t,this.baseAttraction,n.maxAttraction)}}]),n}(l)),f.minAttraction=0,f.maxAttraction=100,o._RF.pop()}}}));

System.register("chunks:///first-person-camera.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var i,o,n,r,a,s,h,c,u,l,p,d,f,m,_,v,g,y,T,O,P,E,b,H,w,S,C,M,x,z,R,U,k,A,L,j,D,I,N,Q;return t({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_temp:void 0}),{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inherits,n=t.classCallCheck,r=t.possibleConstructorReturn,a=t.getPrototypeOf,s=t.initializerDefineProperty,h=t.assertThisInitialized,c=t.createClass},function(t){u=t.cclegacy,l=t._decorator,p=t.math,d=t.Node,f=t.toRadian,m=t.systemEvent,_=t.SystemEvent,v=t.CameraComponent,g=t.renderer,y=t.game,T=t.Component}],execute:function(){u._RF.push({},"880b4w+I/RN1adeszn5EeG2","first-person-camera",void 0),U=l.ccclass,k=l.property,A=p.Vec2,L=p.Vec3,p.Quat,j=new A,D=new A,I=new L,N=new L,Q=new L,t("FirstPersonCamera",(O=k({type:d}),P=k({slide:!0,range:[.05,.5,.01]}),U((H=i((b=function(t){function e(){var t,i;n(this,e);for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return i=r(this,(t=a(e)).call.apply(t,[this].concat(c))),s(i,"ground",H,h(i)),s(i,"moveSpeed",w,h(i)),s(i,"scrollSpeed",S,h(i)),s(i,"maxOrtheHeight",C,h(i)),s(i,"minOrtheHeight",M,h(i)),s(i,"panMaxPosition",x,h(i)),s(i,"panMinPosition",z,h(i)),s(i,"damp",R,h(i)),i._position=new L,i._totalPanOffset=new L,i._currentPanOffset=new L,i._startPosition=null,i._isZooming=!1,i}return o(e,t),c(e,[{key:"onLoad",value:function(){this.node.eulerAngles=new L(-30,45,0);var t=.5*this.ground.scale.x;this._startPosition=this.node.position=new L(t,Math.SQRT2*t*Math.tan(f(30)),t),m.on(_.EventType.MOUSE_WHEEL,this.onMouseWheel,this),m.on(_.EventType.TOUCH_START,this.onTouchStart,this),m.on(_.EventType.TOUCH_MOVE,this.onTouchMove,this),m.on(_.EventType.TOUCH_END,this.onTouchEnd,this),L.copy(this._position,this.node.position),this._camera=this.node.getComponent(v)}},{key:"onDestroy",value:function(){m.off(_.EventType.MOUSE_WHEEL,this.onMouseWheel,this),m.off(_.EventType.TOUCH_START,this.onTouchStart,this),m.off(_.EventType.TOUCH_MOVE,this.onTouchMove,this),m.off(_.EventType.TOUCH_END,this.onTouchEnd,this)}},{key:"update",value:function(t){var e=this.maxOrtheHeight/this._camera.orthoHeight,i=new L(e,e/Math.SQRT2,1);L.multiply(N,this.panMinPosition,i),L.multiply(Q,this.panMaxPosition,i),L.add(I,this._totalPanOffset,this._currentPanOffset),L.transformQuat(I,I.clampf(N,Q),this.node.rotation),L.add(this._position,this._startPosition,I),L.lerp(I,this.node.position,this._position,t/this.damp),this.node.setPosition(I)}},{key:"onMouseWheel",value:function(t){var e=-t.getScrollY()*this.scrollSpeed*.1;this._camera.projection===g.CameraProjection.PERSPECTIVE?(L.transformQuat(I,L.UNIT_Z,this.node.rotation),L.scaleAndAdd(this._position,this.node.position,I,e)):(this._camera.orthoHeight+=.1*e,this._camera.orthoHeight=p.clamp(this._camera.orthoHeight,this.minOrtheHeight,this.maxOrtheHeight))}},{key:"onTouchStart",value:function(t){t.getLocation(j),this._currentPanOffset.set(0,0,0),this._isZooming=j.x<.2*y.canvas.width}},{key:"onTouchMove",value:function(t){if(t.getLocation(D),this._isZooming){t.getPreviousLocation(j),A.subtract(D,D,j);var e=-D.y*this.scrollSpeed*.5;this._camera.projection===g.CameraProjection.PERSPECTIVE?(L.transformQuat(I,L.UNIT_Z,this.node.rotation),L.scaleAndAdd(this._position,this.node.position,I,e)):(this._camera.orthoHeight+=.1*e,this._camera.orthoHeight=p.clamp(this._camera.orthoHeight,this.minOrtheHeight,this.maxOrtheHeight))}else{t.getStartLocation(j),t.getLocation(D),A.subtract(D,D,j);var i=this._camera.orthoHeight/this.maxOrtheHeight;this._currentPanOffset.x=-D.x*this.moveSpeed*i,this._currentPanOffset.y=-D.y*this.moveSpeed*i}}},{key:"onTouchEnd",value:function(t){this._totalPanOffset.add(this._currentPanOffset),this._currentPanOffset.set(0,0,0)}}]),e}(T)).prototype,"ground",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(b.prototype,"moveSpeed",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),S=i(b.prototype,"scrollSpeed",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),C=i(b.prototype,"maxOrtheHeight",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 94}}),M=i(b.prototype,"minOrtheHeight",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),x=i(b.prototype,"panMaxPosition",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new L(40,40,0)}}),z=i(b.prototype,"panMinPosition",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new L(-40,-40,0)}}),R=i(b.prototype,"damp",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),E=b))||E)),u._RF.pop()}}}));

System.register("chunks:///scripts/CustomerController.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./Customer.js"],(function(t,o){var i,e,s,n,a,r,h,c,l,u,d,p,m,y,C,D,v,L,I,R,w,E,f,g,A,O,b;return t({_dec:void 0,_class:void 0,_temp:void 0,CustomerStates:void 0}),{setters:[function(t){i=t.inherits,e=t.classCallCheck,s=t.possibleConstructorReturn,n=t.getPrototypeOf,a=t.createClass},function(t){r=t.cclegacy,h=t._decorator,c=t.Vec3,l=t.Quat,u=t.Color,d=t.randomRange,p=t.SkeletalAnimationComponent,m=t.SkinningModelComponent,y=t.randomRangeInt,C=t.random,D=t.Component},function(t){v=t.Customer}],execute:function(){r._RF.push({},"b01d7JfclREB68N4VGM53e5","CustomerController",void 0),R=h.ccclass,h.property,w=new c,E=new c,f=new l,g=[8,7],new u,A=[.4,.4,.4,1],O=[1,1,1,1],function(t){t[t.IDLE=0]="IDLE",t[t.ROAMING=1]="ROAMING",t[t.HOOKED=2]="HOOKED",t[t.DEAL=3]="DEAL"}(b||(b={})),t("CustomerController",(L=R("CustomerController"),L(I=function(t){function o(){var t,i;e(this,o);for(var a=arguments.length,r=new Array(a),h=0;h<a;h++)r[h]=arguments[h];return(i=s(this,(t=n(o)).call.apply(t,[this].concat(r)))).animComp=null,i.model=null,i.state=b.IDLE,i.velocity=new c,i.targetRotation=new l,i.targetDealDistance=d(5,15),i.rotationLerpCountDown=1,i.nextTurn=-1,i.radius=0,i}return i(o,t),a(o,[{key:"start",value:function(){this.customerData=new v,this.animComp=this.node.getComponent(p),this.model=this.node.getComponentInChildren(m);var t=[1/g[0],1/g[1]];t.push(y(0,g[0])*t[0]),t.push(y(0,g[1])*t[1]),this.model.setInstancedAttribute("a_tiling_offset",t),this.model.setInstancedAttribute("a_color_instanced",A),this.radius=.5*this.node.scene.getChildByName("Ground").scale.x}},{key:"update",value:function(t){if(this.nextTurn-=t,this.nextTurn<0&&(this.state===b.IDLE||this.state===b.ROAMING)){var o=C()>.01*this.customerData.attraction;o&&this.state===b.ROAMING?(this.velocity.set(0,0,0),this.animComp.play("Root|Idle"),this.state=b.IDLE):o||this.state!==b.IDLE||(this.velocity.set(C()-.5,0,C()-.5).normalize(),this.animComp.play(this.customerData.attraction>20?"Root|Run":"Root|Walk"),this.state=b.ROAMING),this.rotationLerpCountDown=2.1,this.nextTurn=d(0,3)}var i=this.node.position;switch(this.state){case b.HOOKED:var e=i.length();this.velocity.set(i).multiplyScalar(-1/e),this.rotationLerpCountDown=2.1,e<this.targetDealDistance&&(this.state=b.DEAL,this.animComp.play("Root|Interact_ground"));case b.ROAMING:c.add(w,i,c.multiplyScalar(w,this.velocity,5*t*(.03*this.customerData.attraction+1))),w.x<-this.radius?(this.velocity.x=Math.abs(this.velocity.x),this.rotationLerpCountDown=2.1):w.x>this.radius&&(this.velocity.x=-Math.abs(this.velocity.x),this.rotationLerpCountDown=2.1),w.y<-this.radius?(this.velocity.y=Math.abs(this.velocity.y),this.rotationLerpCountDown=2.1):w.y>this.radius&&(this.velocity.y=-Math.abs(this.velocity.y),this.rotationLerpCountDown=2.1),w.z<-this.radius?(this.velocity.z=Math.abs(this.velocity.z),this.rotationLerpCountDown=2.1):w.z>this.radius&&(this.velocity.z=-Math.abs(this.velocity.z),this.rotationLerpCountDown=2.1),this.node.setPosition(w),this.rotationLerpCountDown>2&&(l.fromViewUp(this.targetRotation,c.normalize(E,this.velocity)),this.rotationLerpCountDown=2),this.rotationLerpCountDown>0&&(this.node.setRotation(l.slerp(f,this.node.rotation,this.targetRotation,.1)),this.rotationLerpCountDown-=t);break;case b.IDLE:case b.DEAL:}}},{key:"addAttraction",value:function(t){var o=this.customerData.attraction+t;switch(this.customerData.attraction=o,this.state){case b.IDLE:case b.ROAMING:o>50&&(this.state=b.HOOKED,this.model.setInstancedAttribute("a_color_instanced",O),this.animComp.play("Root|Run"));break;case b.HOOKED:o<=50&&(this.state=b.IDLE,this.model.setInstancedAttribute("a_color_instanced",A),this.animComp.play("Root|Idle"));break;case b.DEAL:}}},{key:"buyProduction",value:function(){this.onBuyProduction&&this.onBuyProduction(this)}}]),o}(D))||I)),r._RF.pop()}}}));

System.register("chunks:///scripts/PlayerController.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./AdvertisementController.js","./Player.js","./Advertisement.js"],(function(e,t){var i,n,r,o,a,s,c,u,d,l,p,h,y,v,m,_,f,g,P,T,b,C,D,A,S,I,k,w,E,H,M,j,N,U,z,R,B,G,O,W,x,F,J,L;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,r=e.classCallCheck,o=e.possibleConstructorReturn,a=e.getPrototypeOf,s=e.initializerDefineProperty,c=e.assertThisInitialized,u=e.createClass},function(e){d=e.cclegacy,l=e._decorator,p=e.geometry,h=e.Vec3,y=e.Prefab,v=e.LabelComponent,m=e.CameraComponent,_=e.ModelComponent,f=e.instantiate,g=e.director,P=e.systemEvent,T=e.SystemEvent,b=e.loader,C=e.JsonAsset,D=e.PhysicsSystem,A=e.Component},function(e){S=e.AdvertisementController},function(e){I=e.Player},function(e){k=e.Advertisement}],execute:function(){d._RF.push({},"c81a3oMr4BAqptDZXHT+JXH","PlayerController",void 0),x=l.ccclass,F=l.property,J=p.ray,L=new J,new h,e("PlayerController",(w=x("PlayerController"),E=F({type:y}),H=F({type:y}),M=F({type:v}),j=F({type:v}),N=F({type:v}),w((R=i((z=function(e){function t(){var e,i;r(this,t);for(var n=arguments.length,u=new Array(n),d=0;d<n;d++)u[d]=arguments[d];return i=o(this,(e=a(t)).call.apply(e,[this].concat(u))),s(i,"rangeIndicatorPrfb",R,c(i)),s(i,"advertisementPrfb",B,c(i)),s(i,"customMoneyTips",G,c(i)),s(i,"customProductionPriceTips",O,c(i)),s(i,"customProductionCountTips",W,c(i)),i._advertisements=[],i}return n(t,e),u(t,[{key:"start",value:function(){this.playerData=new I,this.initAd(),this._cameraNode=this.node.scene.getChildByName("Camera"),this._cameraComp=this._cameraNode.getComponent(m),this._groundNode=this.node.scene.getChildByName("Ground"),this._groundModelComp=this._groundNode.getComponent(_),this._rangeIndicator=f(this.rangeIndicatorPrfb),this._rangeIndicator.parent=g.getScene(),this._rangeIndicator.active=!1,P.on(T.EventType.TOUCH_START,this.onTouchStart.bind(this)),P.on(T.EventType.TOUCH_MOVE,this.onTouchMove.bind(this)),P.on(T.EventType.TOUCH_END,this.onTouchEnd.bind(this)),this.updateUITips()}},{key:"initAd",value:function(){var e=this;b.loadRes("configs/advertisements.json",C,(function(t,i){Array.isArray(i.json)&&(i.json.forEach((function(t){var i=new k;i.price=t.price,i.range=t.range,i.range=t.range;var n=f(e.advertisementPrfb);n.parent=g.getScene(),n.active=!1;var r=n.getComponent(S);r.advertisementData=i,e._advertisements.push(r)})),e._curSelectedAd=e._advertisements[0])}))}},{key:"update",value:function(e){}},{key:"raycastHitGround",value:function(e,t){var i=e.getLocation();this._cameraComp.screenPointToRay(i.x,i.y,L);var n=D.instance.raycastResults;if(D.instance.raycast(L))for(var r=0;r<n.length;r++){var o=n[r];o.collider.node.uuid===this._groundModelComp.node.uuid&&t&&t(o.hitPoint)}}},{key:"onTouchStart",value:function(e){var t=this;this._isTouchStarted=!0,this._rangeIndicator.active=!0;var i=this._curSelectedAd.advertisementData.range;this._rangeIndicator.setScale(new h(2*i,1,2*i)),this.raycastHitGround(e,(function(e){t._rangeIndicator.setWorldPosition(e)}))}},{key:"onTouchMove",value:function(e){var t=this;this._isTouchStarted&&this.raycastHitGround(e,(function(e){t._rangeIndicator.setWorldPosition(e)}))}},{key:"onTouchEnd",value:function(e){var t=this;this._isTouchStarted=!1,this._rangeIndicator.active=!1,this.raycastHitGround(e,(function(e){t._rangeIndicator.setWorldPosition(e),t._curSelectedAd.advertisementData.price<t.playerData.money&&(t.playerData.money-=t._curSelectedAd.advertisementData.price,t.onDropAd(e,t._curSelectedAd))}))}},{key:"updateUITips",value:function(){this.customMoneyTips.string=""+this.playerData.money,this.customProductionPriceTips.string=""+this.playerData.production.price,this.customProductionCountTips.string=""+this.playerData.production.count}},{key:"addProduction",value:function(){this.playerData.money>this.playerData.production.price?(this.playerData.money-=this.playerData.production.price,this.playerData.production.count++,this.updateUITips()):console.log("111111111")}},{key:"addPrice",value:function(){this.playerData.production.price+=100,this.onAddPrice&&this.onAddPrice(),this.updateUITips()}},{key:"subPrice",value:function(){this.playerData.production.price-=100,this.onSubPrice&&this.onSubPrice(),this.updateUITips()}},{key:"onAdButtonClicked",value:function(e,t){var i=Number.parseInt(t);this._curSelectedAd=this._advertisements[i]}}]),t}(A)).prototype,"rangeIndicatorPrfb",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(z.prototype,"advertisementPrfb",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(z.prototype,"customMoneyTips",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(z.prototype,"customProductionPriceTips",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(z.prototype,"customProductionCountTips",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=z))||U)),d._RF.pop()}}}));

System.register("chunks:///scripts/GameManager.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./GameDefines.js","./CustomerController.js","./PlayerController.js"],(function(t,e){var r,o,i,n,a,l,s,u,c,f,d,p,h,m,y,v,C,_,g,b,P,A,D,k,G,F,I,T,j;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(t){r=t.applyDecoratedDescriptor,o=t.inherits,i=t.classCallCheck,n=t.possibleConstructorReturn,a=t.getPrototypeOf,l=t.initializerDefineProperty,s=t.assertThisInitialized,u=t.createClass},function(t){c=t.cclegacy,f=t._decorator,d=t.Vec3,p=t.Prefab,h=t.instantiate,m=t.randomRange,y=t.Component},function(t){v=t.gameDefines},function(t){C=t.CustomerController},function(t){_=t.PlayerController}],execute:function(){c._RF.push({},"3c34cCllvlGCIKOWNIuqna3","GameManager",void 0),I=f.ccclass,T=f.property,j=new d,t("GameManager",(g=I("GameManager"),b=T({type:_}),P=T({type:p}),g((k=r((D=function(t){function e(){var t,r;i(this,e);for(var o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];return r=n(this,(t=a(e)).call.apply(t,[this].concat(u))),l(r,"playerCtrl",k,s(r)),l(r,"customerPrfb",G,s(r)),l(r,"customerCount",F,s(r)),r._customers=[],r._falloffInterval=1,r._curFalloffTime=0,r}return o(e,t),u(e,[{key:"start",value:function(){this._groundNode=this.node.scene.getChildByName("Ground"),this.playerCtrl.onDropAd=this.onDropAd.bind(this),this.playerCtrl.onAddPrice=this.onAddPrice.bind(this),this.playerCtrl.onSubPrice=this.onSubPrice.bind(this),this.initCustomers()}},{key:"initCustomers",value:function(){for(var t=.5*this._groundNode.scale.x,e=0;e<this.customerCount;e++){var r=h(this.customerPrfb);r.setPosition(m(-t,t),0,m(-t,t)),r.parent=this.node;var o=r.getComponent(C);o.onBuyProduction=this.onCustomBuyProduction.bind(this),this._customers.push(o)}}},{key:"onDropAd",value:function(t,e){var r=[];this._customers.forEach((function(o){d.subtract(j,t,o.node.getWorldPosition()),j.length()<=e.advertisementData.range&&r.push(o)}));var o=e.advertisementData.attraction;if(r.length>=2){var i=0;for(i=r.length-1;i>=1;i-=2){var n=r[i],a=r[i-1],l=m(-o,o),s=2*o-l;n.addAttraction(l),a.addAttraction(s)}0===i&&r[0].addAttraction(o)}else 1===r.length&&r[0].addAttraction(o)}},{key:"falloffAllCustomers",value:function(t){this._customers.forEach((function(e){e.addAttraction(t)}))}},{key:"update",value:function(t){this._curFalloffTime+=t,this._curFalloffTime>this._falloffInterval&&(this.falloffAllCustomers(-v.fallofSpeed),this._curFalloffTime=0)}},{key:"onCustomBuyProduction",value:function(t){var e=this.playerCtrl.playerData.production.count-1;e>=0&&(this.playerCtrl.playerData.production.count=e,this.playerCtrl.updateUITips())}},{key:"onAddPrice",value:function(){this.falloffAllCustomers(-30)}},{key:"onSubPrice",value:function(){this.falloffAllCustomers(40)}}]),e}(y)).prototype,"playerCtrl",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=r(D.prototype,"customerPrfb",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=r(D.prototype,"customerCount",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),A=D))||A)),c._RF.pop()}}}));

System.register("chunks:///_virtual/prerequisite-imports:main",["../scripts/BackUps/consumer.js","../scripts/BackUps/crowd.js","../scripts/Unit.js","../scripts/AdvertisementController.js","../scripts/AdvertisementManager.js","../scripts/Production.js","../scripts/Player.js","../scripts/Advertisement.js","../scripts/GameDefines.js","../scripts/Customer.js","../first-person-camera.js","../scripts/CustomerController.js","../scripts/PlayerController.js","../scripts/GameManager.js"],(function(s,t){return{setters:[function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){}],execute:function(){}}}));

(function(r) {
  r('project:///assets/scripts/BackUps/consumer.js', 'chunks:///scripts/BackUps/consumer.js');
  r('project:///assets/scripts/BackUps/crowd.js', 'chunks:///scripts/BackUps/crowd.js');
  r('project:///assets/scripts/Unit.js', 'chunks:///scripts/Unit.js');
  r('project:///assets/scripts/AdvertisementController.js', 'chunks:///scripts/AdvertisementController.js');
  r('project:///assets/scripts/AdvertisementManager.js', 'chunks:///scripts/AdvertisementManager.js');
  r('project:///assets/scripts/Production.js', 'chunks:///scripts/Production.js');
  r('project:///assets/scripts/Player.js', 'chunks:///scripts/Player.js');
  r('project:///assets/scripts/Advertisement.js', 'chunks:///scripts/Advertisement.js');
  r('project:///assets/scripts/GameDefines.js', 'chunks:///scripts/GameDefines.js');
  r('project:///assets/scripts/Customer.js', 'chunks:///scripts/Customer.js');
  r('project:///assets/first-person-camera.js', 'chunks:///first-person-camera.js');
  r('project:///assets/scripts/CustomerController.js', 'chunks:///scripts/CustomerController.js');
  r('project:///assets/scripts/PlayerController.js', 'chunks:///scripts/PlayerController.js');
  r('project:///assets/scripts/GameManager.js', 'chunks:///scripts/GameManager.js');
  r('virtual:///prerequisite-imports:main', 'chunks:///_virtual/prerequisite-imports:main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    var _m;
    return {
        setters: [function(m) { _m = m; }],
        execute: function () { _export(_m); }
    };
    });
});